[

  {
    "nested": {
      "iterate": {
        "i": "[1,2,3,4,5,6,7,8,9,10]"
      },
      "scripts": [
        {
          "comment": "join fun_land board as player [[i]]",
          "request": {
            "uri": "rooms/fun_land/join",
            "entity": {
              "name": "player[[i]]"
            }
          },
          "response": {
            "store": "player[[i]]",
            "sessionName": "player[[i]]",
            "session": "apiKey",
            "check": [
              {"condition": "json.name == 'player[[i]]'"},
              {"condition": "json.id != null"}
            ]
          }
        }
      ]
    }
  },

  {
    "nested": {
      "iterate": { "i": "[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]" },
      "scripts": [
        {
          "nested": {
            "iterate": { "p": "[1,2,3,4,5,6,7,8,9,10]" },
            "scripts": [

              {
                "comment": "play word as player [[p]]",
                "before": "find-word-and-tiles big_board player[[p]]_word1",
                "request": {
                  "session": "player1",
                  "uri": "rooms/the_expanse/play",
                  "entity": {
                    "room": "the_expanse",
                    "stateChange": "word_played",
                    "id": "{{player[[p]].id}}",
                    "clientId": "{{player[[p]].id}}",
                    "apiKey": "{{player[[p]].apiKey}}",
                    "word": "{{player[[p]]_word1.word}}",
                    "tilesJson": "{{escaped_json player[[p]]_word1.tiles}}"
                  }
                }
              }

            ]
          }
        }
      ]
    }
  },

  {
    "comment": "player 1 requests board overview for large area",
    "request": {
      "session": "player1",
      "uri": "rooms/the_expanse/board/view.png?x1=-1000&x2=1000&y1=-1000&y2=1000&height=600&width=800"
    },
    "after": "save-board-view /tmp/views/{{date_format 'now' 'yyyy-MM-dd_HH-mm'}}.png"
  }
]