[
  {
    "include": "parts/start_2player_game",
    "params": { "room": "5x5" }
  },

  {
    "comment": "get board state, verify game is started",
    "request": {
      "session": "player1",
      "uri": "rooms/{{p1room.room}}/board"
    },
    "response": {
      "store": "board",
      "check": [
        {"condition": "json.roomState == 'active'"},
        {"condition": "json.unclaimed() == 25"}
      ]
    }
  },

  {
    "comment": "play moves until no blank tiles remain, get room info",
    "before": "play-all-tiles board {{p1room.room}} p1room.player p2room.player",
    "request": {
      "session": "player1",
      "uri": "rooms/{{p1room.room}}/board"
    },
    "response": {
      "store": "board",
      "check": [
        {"condition": "json.unclaimed() == 0"},
        {"condition": "json.roomState == 'ended'"}
      ]
    }
  }
]